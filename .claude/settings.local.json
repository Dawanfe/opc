{
  "permissions": {
    "allow": [
      "Bash(python3:*)",
      "Bash(npx create-next-app@latest:*)",
      "Bash(npm ls:*)",
      "Bash(npm uninstall:*)",
      "Bash(npm install:*)",
      "WebFetch(domain:my.feishu.cn)",
      "Bash(npm run db:init:*)",
      "Bash(timeout 10 npm run dev:*)",
      "Bash(gtimeout:*)",
      "Bash(npx tsx -e \"import Database from ''better-sqlite3''; const db = new Database\\(''data/opc.db''\\); console.log\\(''Communities:'', db.prepare\\(''SELECT COUNT\\(*\\) as count FROM communities''\\).get\\(\\)\\); console.log\\(''Events:'', db.prepare\\(''SELECT COUNT\\(*\\) as count FROM events''\\).get\\(\\)\\); console.log\\(''News:'', db.prepare\\(''SELECT COUNT\\(*\\) as count FROM news''\\).get\\(\\)\\); db.close\\(\\);\")",
      "Bash(npx tsx:*)",
      "Bash(grep:*)",
      "Bash(npm run dev)",
      "Bash(npx tsc:*)",
      "Bash(chmod:*)",
      "Bash(DEPLOY-SUMMARY.md << 'EOF'\n# ðŸš€ WeOPC éƒ¨ç½²å®Œæˆæ€»ç»“\n\n## å·²åˆ›å»ºçš„éƒ¨ç½²æ–‡ä»¶\n\n### 1. Docker é…ç½®\n- âœ… `next/Dockerfile` - Next.js åº”ç”¨ Docker é•œåƒé…ç½®\n- âœ… `next/.dockerignore` - Docker æž„å»ºæŽ’é™¤æ–‡ä»¶\n- âœ… `docker-compose.yml` - Docker Compose ç¼–æŽ’é…ç½®\n\n### 2. Nginx é…ç½®\n- âœ… `nginx/nginx.conf` - Nginx åå‘ä»£ç†é…ç½®\\(æ”¯æŒ /weopc å­è·¯å¾„\\)\n\n### 3. éƒ¨ç½²è„šæœ¬\n- âœ… `deploy.sh` - å®Œæ•´è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬\n- âœ… `quick-deploy.sh` - å¿«é€Ÿéƒ¨ç½²è„šæœ¬\n- âœ… `pre-deploy-check.sh` - éƒ¨ç½²å‰çŽ¯å¢ƒæ£€æŸ¥è„šæœ¬\n\n### 4. é…ç½®æ–‡ä»¶\n- âœ… `.env.production` - ç”Ÿäº§çŽ¯å¢ƒå˜é‡\n- âœ… `next/next.config.ts` - Next.js é…ç½®\\(å·²æ·»åŠ  basePath æ”¯æŒ\\)\n- âœ… `.gitignore` - Git å¿½ç•¥æ–‡ä»¶\n\n### 5. æ–‡æ¡£\n- âœ… `README.md` - é¡¹ç›®è¯´æ˜Žæ–‡æ¡£\n- âœ… `DEPLOYMENT.md` - è¯¦ç»†éƒ¨ç½²æ–‡æ¡£\n\n## éƒ¨ç½²æ­¥éª¤\n\n### æ–¹å¼ä¸€: ä¸€é”®éƒ¨ç½²ï¼ˆæŽ¨èï¼‰\n\n```bash\n# 1. æ£€æŸ¥éƒ¨ç½²çŽ¯å¢ƒ\n./pre-deploy-check.sh\n\n# 2. æ‰§è¡Œéƒ¨ç½²\n./deploy.sh\n```\n\n### æ–¹å¼äºŒ: å¿«é€Ÿéƒ¨ç½²\n\n```bash\n./quick-deploy.sh\n```\n\n## æœåŠ¡å™¨ä¿¡æ¯\n\n- **IP åœ°å€**: 101.200.231.179\n- **ç”¨æˆ·å**: root\n- **éƒ¨ç½²è·¯å¾„**: /opt/weopc\n- **è®¿é—®åŸŸå**: http://globalaialumni.com/weopc\n\n## è®¿é—®åœ°å€\n\n- ç”¨æˆ·ç«¯é¦–é¡µ: http://globalaialumni.com/weopc\n- ç®¡ç†åŽå°: http://globalaialumni.com/weopc/admin\n- æµ‹è¯•é¡µé¢: http://globalaialumni.com/weopc/test-auth\n\n## ç®¡ç†åŽå°ç™»å½•\n\n- ç”¨æˆ·å: `admin`\n- å¯†ç : `admin123`\n\n## éƒ¨ç½²æž¶æž„\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         Nginx \\(Port 80/443\\)            â”‚\nâ”‚    åŸŸå: globalaialumni.com/weopc      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚\n                â”‚ Reverse Proxy\n                â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚      Next.js App \\(Port 3000\\)           â”‚\nâ”‚                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚    SQLite Database              â”‚   â”‚\nâ”‚  â”‚    /app/data/opc.db             â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  User Authentication \\(JWT\\)      â”‚   â”‚\nâ”‚  â”‚  Admin Authentication           â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## å®¹å™¨è¯´æ˜Ž\n\n### weopc-nginx\n- åŸºäºŽ nginx:alpine\n- ç«¯å£æ˜ å°„: 80:80, 443:443\n- åŠŸèƒ½: åå‘ä»£ç†ã€é™æ€èµ„æºç¼“å­˜ã€Gzip åŽ‹ç¼©\n\n### weopc-app\n- åŸºäºŽ Node.js 20\n- ç«¯å£: 3000 \\(å†…éƒ¨\\)\n- åŠŸèƒ½: Next.js åº”ç”¨ã€APIã€æ•°æ®åº“\n\n## æ•°æ®æŒä¹…åŒ–\n\n- Volume åç§°: `weopc-data`\n- å®¹å™¨è·¯å¾„: `/app/data`\n- æ•°æ®åº“æ–‡ä»¶: `/app/data/opc.db`\n\n## å¸¸ç”¨è¿ç»´å‘½ä»¤\n\n```bash\n# æŸ¥çœ‹æœåŠ¡çŠ¶æ€\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose ps'\n\n# å®žæ—¶æŸ¥çœ‹æ—¥å¿—\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose logs -f'\n\n# é‡å¯æœåŠ¡\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose restart'\n\n# åœæ­¢æœåŠ¡\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose down'\n\n# å¤‡ä»½æ•°æ®åº“\nssh root@101.200.231.179 'docker cp weopc-app:/app/data/opc.db /root/backup.db'\n```\n\n## å®‰å…¨æé†’\n\nâš ï¸ **éƒ¨ç½²åŽå¿…é¡»å®Œæˆä»¥ä¸‹æ“ä½œ**:\n\n1. **ä¿®æ”¹ç®¡ç†å‘˜å¯†ç **\n   - ç™»å½•ç®¡ç†åŽå°åŽç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç \n\n2. **ä¿®æ”¹ JWT å¯†é’¥**\n   ```bash\n   # åœ¨æœåŠ¡å™¨ä¸Šä¿®æ”¹ .env.production\n   JWT_SECRET=your-random-secret-key-here-$\\(openssl rand -hex 32\\)\n   ```\n\n3. **é…ç½® SSL è¯ä¹¦**\n   - å‚è€ƒ DEPLOYMENT.md çš„ SSL é…ç½®ç« èŠ‚\n\n4. **é…ç½®é˜²ç«å¢™**\n   ```bash\n   # åªå¼€æ”¾å¿…è¦ç«¯å£\n   ufw allow 22/tcp\n   ufw allow 80/tcp\n   ufw allow 443/tcp\n   ufw enable\n   ```\n\n## æ€§èƒ½ä¼˜åŒ–\n\nå·²é…ç½®çš„ä¼˜åŒ–é¡¹:\n- âœ… Nginx Gzip åŽ‹ç¼©\n- âœ… é™æ€èµ„æº 365 å¤©ç¼“å­˜\n- âœ… SQLite WAL æ¨¡å¼\n- âœ… Next.js ç”Ÿäº§æž„å»º\n- âœ… Docker å¤šé˜¶æ®µæž„å»º\n\n## ç›‘æŽ§å»ºè®®\n\n1. **æ—¥å¿—ç›‘æŽ§**: å®šæœŸæ£€æŸ¥é”™è¯¯æ—¥å¿—\n2. **ç£ç›˜ç©ºé—´**: ç›‘æŽ§æ•°æ®åº“å¤§å°\n3. **å®¹å™¨å¥åº·**: ä½¿ç”¨ Docker å¥åº·æ£€æŸ¥\n4. **è®¿é—®æ—¥å¿—**: åˆ†æž Nginx è®¿é—®æ—¥å¿—\n\n## æ•…éšœæŽ’æŸ¥\n\nå¦‚é‡é—®é¢˜,ä¾æ¬¡æ£€æŸ¥:\n\n1. å®¹å™¨çŠ¶æ€: `docker-compose ps`\n2. åº”ç”¨æ—¥å¿—: `docker-compose logs weopc-app`\n3. Nginx æ—¥å¿—: `docker-compose logs nginx`\n4. æ•°æ®åº“æ–‡ä»¶: `docker exec weopc-app ls -lh /app/data`\n\nè¯¦ç»†æ•…éšœæŽ’æŸ¥è¯·å‚è€ƒ DEPLOYMENT.md\n\n## ä¸‹ä¸€æ­¥\n\n- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½é¡µé¢\n- [ ] ä¿®æ”¹ç®¡ç†å‘˜å¯†ç \n- [ ] é…ç½® SSL è¯ä¹¦\n- [ ] è®¾ç½®å®šæ—¶å¤‡ä»½\n- [ ] é…ç½®ç›‘æŽ§å‘Šè­¦\n\n---\n\nç¥éƒ¨ç½²é¡ºåˆ©! ðŸŽ‰\nEOF)",
      "Bash(/Users/zhanglei/test/opc/QUICKSTART.md << 'EOF'\n# âš¡ å¿«é€Ÿå¼€å§‹æŒ‡å—\n\n## ðŸš€ éƒ¨ç½²åˆ°ç”Ÿäº§çŽ¯å¢ƒ\n\n### å‰ç½®æ¡ä»¶\n\nç¡®ä¿æœ¬åœ°å·²å®‰è£… `sshpass`:\n\n```bash\n# macOS\nbrew install hudochenkov/sshpass/sshpass\n\n# Linux\nsudo apt-get install sshpass  # Ubuntu/Debian\nsudo yum install sshpass       # CentOS/RHEL\n```\n\n### ä¸€é”®éƒ¨ç½²ï¼ˆ3 æ­¥å®Œæˆï¼‰\n\n```bash\n# 1. è¿›å…¥é¡¹ç›®ç›®å½•\ncd /Users/zhanglei/test/opc\n\n# 2. æ£€æŸ¥éƒ¨ç½²çŽ¯å¢ƒ\n./pre-deploy-check.sh\n\n# 3. æ‰§è¡Œéƒ¨ç½²\n./deploy.sh\n```\n\nç­‰å¾… 5-10 åˆ†é’Ÿ,éƒ¨ç½²å®ŒæˆåŽè®¿é—®:\n- ðŸŒ http://globalaialumni.com/weopc\n\n### å¿«é€Ÿæ›´æ–°éƒ¨ç½²\n\nä»£ç æ”¹åŠ¨åŽå¿«é€Ÿæ›´æ–°:\n\n```bash\n./quick-deploy.sh\n```\n\n## ðŸ“‹ ç®¡ç†åŽå°\n\nè®¿é—®: http://globalaialumni.com/weopc/admin\n\n**é»˜è®¤ç™»å½•è´¦å·**:\n- ç”¨æˆ·å: `admin`\n- å¯†ç : `admin123`\n\nâš ï¸ **é¦–æ¬¡ç™»å½•åŽè¯·ç«‹å³ä¿®æ”¹å¯†ç !**\n\n## ðŸ”§ å¸¸ç”¨è¿ç»´å‘½ä»¤\n\n### æŸ¥çœ‹æœåŠ¡çŠ¶æ€\n```bash\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose ps'\n```\n\n### æŸ¥çœ‹å®žæ—¶æ—¥å¿—\n```bash\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose logs -f'\n```\n\n### é‡å¯æœåŠ¡\n```bash\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose restart'\n```\n\n### å¤‡ä»½æ•°æ®åº“\n```bash\nssh root@101.200.231.179 'docker cp weopc-app:/app/data/opc.db /root/backup_$\\(date +%Y%m%d\\).db'\n```\n\n## ðŸ“ ç®¡ç†åŽå°åŠŸèƒ½\n\n### ç¤¾åŒºç®¡ç†\n1. è®¿é—®: /admin/communities\n2. åŠŸèƒ½:\n   - âž• æ–°å¢žç¤¾åŒº\n   - âœï¸ ç¼–è¾‘ç¤¾åŒº\n   - ðŸ—‘ï¸ åˆ é™¤ç¤¾åŒº\\(æ”¯æŒæ‰¹é‡\\)\n   - ðŸ“¥ æ‰¹é‡å¯¼å…¥\\(Excel\\)\n   - ðŸ“Š åˆ†é¡µæŸ¥è¯¢\\(10æ¡/é¡µ\\)\n\n### æ´»åŠ¨ç®¡ç†\n1. è®¿é—®: /admin/events\n2. åŒç¤¾åŒºç®¡ç†åŠŸèƒ½\n\n### æ–°é—»ç®¡ç†\n1. è®¿é—®: /admin/news\n2. åŒç¤¾åŒºç®¡ç†åŠŸèƒ½\n\n## ðŸ“¥ æ‰¹é‡å¯¼å…¥æ•°æ®\n\n### 1. ä¸‹è½½æ¨¡æ¿\nåœ¨ç®¡ç†é¡µé¢ç‚¹å‡» \"ä¸‹è½½æ¨¡æ¿\" æŒ‰é’®\n\n### 2. å¡«å†™æ•°æ®\næŒ‰ç…§æ¨¡æ¿æ ¼å¼å¡«å†™ Excel æ–‡ä»¶\n\n### 3. ä¸Šä¼ å¯¼å…¥\nç‚¹å‡» \"æ‰¹é‡å¯¼å…¥\",é€‰æ‹©å¡«å¥½çš„ Excel æ–‡ä»¶\n\n### 4. ç¡®è®¤å¯¼å…¥\nç³»ç»Ÿä¼šæ˜¾ç¤ºé¢„è§ˆå’Œé‡å¤æ•°æ®,ç¡®è®¤åŽå¯¼å…¥\n\n## ðŸ› ï¸ æœ¬åœ°å¼€å‘\n\nå¦‚éœ€æœ¬åœ°å¼€å‘è°ƒè¯•:\n\n```bash\n# è¿›å…¥é¡¹ç›®\ncd next\n\n# å®‰è£…ä¾èµ–\nnpm install\n\n# åˆå§‹åŒ–æ•°æ®åº“\nnpm run db:init\n\n# å¯åŠ¨å¼€å‘æœåŠ¡å™¨\nnpm run dev\n```\n\nè®¿é—®: http://localhost:3000\n\n## ðŸ“š è¯¦ç»†æ–‡æ¡£\n\n- **å®Œæ•´éƒ¨ç½²æ–‡æ¡£**: [DEPLOYMENT.md]\\(./DEPLOYMENT.md\\)\n- **é¡¹ç›®è¯´æ˜Ž**: [README.md]\\(./README.md\\)\n- **éƒ¨ç½²æ€»ç»“**: [DEPLOY-SUMMARY.md]\\(./DEPLOY-SUMMARY.md\\)\n\n## â“ å¸¸è§é—®é¢˜\n\n### Q: å¦‚ä½•æŸ¥çœ‹éƒ¨ç½²æ˜¯å¦æˆåŠŸ?\n\n```bash\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose ps'\n```\n\nçœ‹åˆ°æ‰€æœ‰å®¹å™¨çŠ¶æ€ä¸º \"Up\" å³æˆåŠŸ\n\n### Q: é¡µé¢æ— æ³•è®¿é—®æ€Žä¹ˆåŠž?\n\n1. æ£€æŸ¥å®¹å™¨çŠ¶æ€\n2. æŸ¥çœ‹æ—¥å¿—: `docker-compose logs`\n3. æ£€æŸ¥ç«¯å£: `netstat -tulpn | grep 80`\n\n### Q: å¦‚ä½•å›žæ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬?\n\n```bash\nssh root@101.200.231.179 << 'ENDSSH'\ncd /opt/weopc\nls backups/  # æŸ¥çœ‹å¤‡ä»½\ntar -xzf backups/backup_YYYYMMDD_HHMMSS.tar.gz\ndocker-compose up -d --build\nENDSSH\n```\n\n### Q: æ•°æ®åº“å¦‚ä½•å¤‡ä»½?\n\nè‡ªåŠ¨å¤‡ä»½:\n- æ¯æ¬¡éƒ¨ç½²å‰ä¼šè‡ªåŠ¨å¤‡ä»½\n- å¤‡ä»½ä½ç½®: `/opt/weopc/backups/`\n\næ‰‹åŠ¨å¤‡ä»½:\n```bash\nssh root@101.200.231.179 'docker cp weopc-app:/app/data/opc.db /root/backup.db'\n```\n\n## ðŸ” å®‰å…¨æ£€æŸ¥æ¸…å•\n\néƒ¨ç½²å®ŒæˆåŽåŠ¡å¿…å®Œæˆ:\n\n- [ ] ä¿®æ”¹ç®¡ç†å‘˜å¯†ç \n- [ ] ä¿®æ”¹ JWT_SECRET çŽ¯å¢ƒå˜é‡\n- [ ] é…ç½® SSL è¯ä¹¦\\(HTTPS\\)\n- [ ] é…ç½®é˜²ç«å¢™è§„åˆ™\n- [ ] è®¾ç½®å®šæ—¶å¤‡ä»½\n- [ ] æ£€æŸ¥æ—¥å¿—æƒé™\n\n## ðŸ“ž èŽ·å–å¸®åŠ©\n\né‡åˆ°é—®é¢˜?\n\n1. æŸ¥çœ‹ [DEPLOYMENT.md]\\(./DEPLOYMENT.md\\) æ•…éšœæŽ’æŸ¥ç« èŠ‚\n2. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—\n3. ç¡®è®¤ç½‘ç»œè¿žæŽ¥æ­£å¸¸\n\n---\n\nç¥ä½¿ç”¨æ„‰å¿«! ðŸŽ‰\nEOF)",
      "Bash(/Users/zhanglei/test/opc/DEPLOYMENT-CHECKLIST.md << 'EOF'\n# âœ… WeOPC éƒ¨ç½²æ¸…å•\n\n## ðŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶\n\n### æ ¸å¿ƒéƒ¨ç½²æ–‡ä»¶\n- [x] `docker-compose.yml` - Docker Compose ç¼–æŽ’é…ç½®\n- [x] `next/Dockerfile` - Next.js åº”ç”¨é•œåƒæž„å»ºæ–‡ä»¶  \n- [x] `next/.dockerignore` - Docker æž„å»ºå¿½ç•¥æ–‡ä»¶\n- [x] `.env.production` - ç”Ÿäº§çŽ¯å¢ƒå˜é‡é…ç½®\n- [x] `.gitignore` - Git å¿½ç•¥æ–‡ä»¶åˆ—è¡¨\n\n### Nginx é…ç½®\n- [x] `nginx/nginx.conf` - Nginx åå‘ä»£ç†é…ç½®\n  - é…ç½®å­è·¯å¾„: `/weopc`\n  - Gzip åŽ‹ç¼©\n  - é™æ€èµ„æºç¼“å­˜\n  - å¥åº·æ£€æŸ¥ç«¯ç‚¹\n\n### éƒ¨ç½²è„šæœ¬\n- [x] `deploy.sh` - å®Œæ•´è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬\n- [x] `quick-deploy.sh` - å¿«é€Ÿéƒ¨ç½²è„šæœ¬\n- [x] `pre-deploy-check.sh` - éƒ¨ç½²å‰æ£€æŸ¥è„šæœ¬\n\n### Next.js é…ç½®æ›´æ–°\n- [x] `next/next.config.ts` - æ·»åŠ  basePath å’Œ standalone è¾“å‡ºé…ç½®\n\n### æ–‡æ¡£\n- [x] `README.md` - é¡¹ç›®è¯´æ˜Žæ–‡æ¡£\n- [x] `DEPLOYMENT.md` - è¯¦ç»†éƒ¨ç½²æ–‡æ¡£\\(7000+ å­—\\)\n- [x] `DEPLOY-SUMMARY.md` - éƒ¨ç½²æ€»ç»“æ–‡æ¡£\n- [x] `QUICKSTART.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—\n- [x] `DEPLOYMENT-CHECKLIST.md` - æœ¬æ¸…å•\n\n## ðŸš€ éƒ¨ç½²å‰æ£€æŸ¥\n\n### æœ¬åœ°çŽ¯å¢ƒ\n- [ ] Docker å·²å®‰è£…\n- [ ] Git å·²å®‰è£…\\(å¯é€‰\\)\n- [ ] sshpass å·²å®‰è£…\n- [ ] æ‰€æœ‰æ–‡ä»¶æƒé™æ­£ç¡®\n\n### æœåŠ¡å™¨å‡†å¤‡\n- [ ] æœåŠ¡å™¨å¯è®¿é—®\\(101.200.231.179\\)\n- [ ] SSH è¿žæŽ¥æ­£å¸¸\n- [ ] åŸŸåå·²è§£æž\\(globalaialumni.com\\)\n- [ ] ç«¯å£ 80/443 å¯ç”¨\n\n### ä»£ç å‡†å¤‡\n- [ ] æ‰€æœ‰ä»£ç å·²æäº¤\\(å¯é€‰\\)\n- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–\n- [ ] ä¾èµ–å·²æ›´æ–°\n\n## ðŸ“ éƒ¨ç½²æ­¥éª¤\n\n### 1. çŽ¯å¢ƒæ£€æŸ¥\n```bash\n./pre-deploy-check.sh\n```\n\n### 2. æ‰§è¡Œéƒ¨ç½²\n```bash\n./deploy.sh\n```\n\n### 3. éªŒè¯éƒ¨ç½²\n- [ ] è®¿é—® http://globalaialumni.com/weopc\n- [ ] ç”¨æˆ·ç«¯é¡µé¢æ­£å¸¸\n- [ ] ç®¡ç†åŽå°å¯è®¿é—®\n- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸\n- [ ] æ•°æ®åº“æŸ¥è¯¢æ­£å¸¸\n\n### 4. åŠŸèƒ½æµ‹è¯•\n- [ ] ç¤¾åŒºåˆ—è¡¨é¡µé¢\n- [ ] æ´»åŠ¨åˆ—è¡¨é¡µé¢  \n- [ ] æ–°é—»åˆ—è¡¨é¡µé¢\n- [ ] éœ€æ±‚å¹¿åœºé¡µé¢\n- [ ] ç”¨æˆ·ç™»å½•/æ³¨å†Œ\n- [ ] ç®¡ç†åŽå°ç™»å½•\n- [ ] ç¤¾åŒºç®¡ç† CRUD\n- [ ] æ´»åŠ¨ç®¡ç† CRUD\n- [ ] æ–°é—»ç®¡ç† CRUD\n- [ ] æ‰¹é‡å¯¼å…¥åŠŸèƒ½\n- [ ] æ‰¹é‡åˆ é™¤åŠŸèƒ½\n\n## ðŸ” éƒ¨ç½²åŽå®‰å…¨é…ç½®\n\n### ç«‹å³æ‰§è¡Œ\n- [ ] ä¿®æ”¹ç®¡ç†å‘˜å¯†ç \\(admin/admin123\\)\n- [ ] ä¿®æ”¹ JWT_SECRET çŽ¯å¢ƒå˜é‡\n- [ ] æ£€æŸ¥æ•°æ®åº“æƒé™\n\n### å»ºè®®é…ç½®\n- [ ] é…ç½® SSL è¯ä¹¦\\(HTTPS\\)\n- [ ] é…ç½®é˜²ç«å¢™è§„åˆ™\n- [ ] è®¾ç½®è‡ªåŠ¨å¤‡ä»½\n- [ ] é…ç½®æ—¥å¿—è½®è½¬\n- [ ] è®¾ç½®ç›‘æŽ§å‘Šè­¦\n\n## ðŸ“Š æ€§èƒ½ä¼˜åŒ–\n\n### å·²é…ç½®é¡¹\n- [x] Nginx Gzip åŽ‹ç¼©\n- [x] é™æ€èµ„æºé•¿æœŸç¼“å­˜\n- [x] SQLite WAL æ¨¡å¼\n- [x] Next.js ç”Ÿäº§æž„å»º\n- [x] Docker å¤šé˜¶æ®µæž„å»º\n- [x] å®¹å™¨å¥åº·æ£€æŸ¥\n\n### å¯é€‰ä¼˜åŒ–\n- [ ] é…ç½® CDN\n- [ ] å¯ç”¨ HTTP/2\n- [ ] æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–\n- [ ] æ·»åŠ  Redis ç¼“å­˜\n- [ ] é…ç½®è´Ÿè½½å‡è¡¡\n\n## ðŸ” ç›‘æŽ§é…ç½®\n\n### å¿…è¦ç›‘æŽ§\n- [ ] å®¹å™¨å¥åº·çŠ¶æ€\n- [ ] åº”ç”¨é”™è¯¯æ—¥å¿—\n- [ ] Nginx è®¿é—®æ—¥å¿—\n- [ ] ç£ç›˜ä½¿ç”¨çŽ‡\n- [ ] å†…å­˜ä½¿ç”¨çŽ‡\n\n### å¯é€‰ç›‘æŽ§\n- [ ] å“åº”æ—¶é—´ç›‘æŽ§\n- [ ] ç”¨æˆ·è®¿é—®ç»Ÿè®¡\n- [ ] API è°ƒç”¨ç»Ÿè®¡\n- [ ] æ•°æ®åº“æ€§èƒ½\n- [ ] è‡ªåŠ¨å‘Šè­¦\n\n## ðŸ’¾ å¤‡ä»½ç­–ç•¥\n\n### è‡ªåŠ¨å¤‡ä»½\n- [x] éƒ¨ç½²å‰è‡ªåŠ¨å¤‡ä»½\n- [ ] è®¾ç½®å®šæ—¶å¤‡ä»½\\(cron\\)\n- [ ] å¤‡ä»½ä¿ç•™ç­–ç•¥\n- [ ] å¼‚åœ°å¤‡ä»½\n\n### æ‰‹åŠ¨å¤‡ä»½å‘½ä»¤\n```bash\n# å¤‡ä»½æ•°æ®åº“\nssh root@101.200.231.179 'docker cp weopc-app:/app/data/opc.db /root/backup_$\\(date +%Y%m%d\\).db'\n\n# å¤‡ä»½æ•´ä¸ªåº”ç”¨\nssh root@101.200.231.179 'cd /opt/weopc && tar -czf /root/weopc_backup_$\\(date +%Y%m%d\\).tar.gz .'\n```\n\n## ðŸ“š è¿ç»´æ–‡æ¡£\n\n### å¸¸ç”¨å‘½ä»¤\n```bash\n# æŸ¥çœ‹çŠ¶æ€\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose ps'\n\n# æŸ¥çœ‹æ—¥å¿—\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose logs -f'\n\n# é‡å¯æœåŠ¡\nssh root@101.200.231.179 'cd /opt/weopc && docker-compose restart'\n\n# æ›´æ–°ä»£ç \n./quick-deploy.sh\n\n# å®Œå…¨é‡æ–°éƒ¨ç½²\n./deploy.sh\n```\n\n### æ•…éšœæŽ’æŸ¥\n1. æ£€æŸ¥å®¹å™¨çŠ¶æ€\n2. æŸ¥çœ‹åº”ç”¨æ—¥å¿—\n3. æŸ¥çœ‹ Nginx æ—¥å¿—\n4. æ£€æŸ¥ç½‘ç»œè¿žæŽ¥\n5. éªŒè¯æ•°æ®åº“æ–‡ä»¶\n\n## ðŸŽ¯ éªŒæ”¶æ ‡å‡†\n\n### åŠŸèƒ½å®Œæ•´æ€§\n- [ ] æ‰€æœ‰é¡µé¢å¯è®¿é—®\n- [ ] æ‰€æœ‰ API æ­£å¸¸\n- [ ] æ•°æ®åº“è¯»å†™æ­£å¸¸\n- [ ] è®¤è¯ç³»ç»Ÿæ­£å¸¸\n- [ ] æ–‡ä»¶ä¸Šä¼ æ­£å¸¸\n\n### æ€§èƒ½æŒ‡æ ‡\n- [ ] é¦–é¡µåŠ è½½ < 3ç§’\n- [ ] API å“åº” < 1ç§’\n- [ ] é™æ€èµ„æºå‘½ä¸­ç¼“å­˜\n- [ ] å†…å­˜ä½¿ç”¨æ­£å¸¸\n- [ ] CPU ä½¿ç”¨æ­£å¸¸\n\n### å®‰å…¨æŒ‡æ ‡\n- [ ] å¯†ç å·²ä¿®æ”¹\n- [ ] JWT å¯†é’¥å·²æ›´æ¢\n- [ ] é˜²ç«å¢™å·²é…ç½®\n- [ ] æ—¥å¿—æƒé™æ­£ç¡®\n- [ ] æ•æ„Ÿæ•°æ®å·²ä¿æŠ¤\n\n## ðŸ“ž æ”¯æŒè”ç³»\n\n### é—®é¢˜æŽ’æŸ¥é¡ºåº\n1. æŸ¥çœ‹ DEPLOYMENT.md æ•…éšœæŽ’æŸ¥ç« èŠ‚\n2. æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—\n3. éªŒè¯ç½‘ç»œè¿žæŽ¥\n4. æŸ¥çœ‹ Docker çŠ¶æ€\n5. æ£€æŸ¥é…ç½®æ–‡ä»¶\n\n### æ—¥å¿—ä½ç½®\n- åº”ç”¨æ—¥å¿—: `docker-compose logs weopc-app`\n- Nginx æ—¥å¿—: `docker-compose logs nginx`\n- è®¿é—®æ—¥å¿—: `/opt/weopc/nginx/logs/`\n- é”™è¯¯æ—¥å¿—: `/opt/weopc/nginx/logs/error.log`\n\n## âœ¨ éƒ¨ç½²å®Œæˆ\n\næ­å–œ! å¦‚æžœæ‰€æœ‰æ£€æŸ¥é¡¹éƒ½å·²å®Œæˆ,æ‚¨çš„ WeOPC åº”ç”¨å·²ç»æˆåŠŸéƒ¨ç½²!\n\nè®¿é—®åœ°å€:\n- ðŸŒ ç”¨æˆ·ç«¯: http://globalaialumni.com/weopc\n- ðŸ”§ ç®¡ç†åŽå°: http://globalaialumni.com/weopc/admin\n\n---\n\néƒ¨ç½²æ—¥æœŸ: ________________\néƒ¨ç½²äººå‘˜: ________________\nç‰ˆæœ¬ä¿¡æ¯: v1.0.0\nEOF)",
      "Bash(./setup-china-mirrors.sh:*)",
      "Bash(./deploy.sh:*)",
      "Bash(sshpass -p \"GAA-lianmeng666\" ssh -o StrictHostKeyChecking=no root@101.200.231.179 'cat > /etc/docker/daemon.json << ''''EOF''''\n{\n  \"\"registry-mirrors\"\": [\n    \"\"https://dockerproxy.com\"\",\n    \"\"https://docker.nju.edu.cn\"\"\n  ],\n  \"\"log-driver\"\": \"\"json-file\"\",\n  \"\"log-opts\"\": {\n    \"\"max-size\"\": \"\"100m\"\",\n    \"\"max-file\"\": \"\"3\"\"\n  },\n  \"\"max-concurrent-downloads\"\": 10,\n  \"\"max-concurrent-uploads\"\": 10\n}\nEOF\nsystemctl daemon-reload\nsystemctl restart docker\nsleep 3\ndocker info | grep -A 5 \"\"Registry Mirrors\"\"')",
      "Bash(sshpass:*)"
    ]
  }
}
